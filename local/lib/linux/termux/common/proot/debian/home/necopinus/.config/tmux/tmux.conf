# Explicitly set the shell to work around proot login issues
set-option -g default-shell /usr/bin/bash

# Kitty support
set-option -as terminal-features ",*:RGB" # True color support
set-option -as terminal-features ",*:hyperlinks" # Hyperlink support
set-option -as terminal-overrides ",*:Smulx=\E[4::%p1%dm"  # Undercurl support
set-option -as terminal-overrides ",*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m"  # Underscore colors

set-option -g allow-passthrough on # Potentially dangerous but allows Kitty image protocol support

# NeoVim tweaks
set-option -sg default-terminal "screen-256color" # Using tmux-256color seems to break some apps????

set-option -sg escape-time 10
set-option -sg focus-events on

# General settings
set-option -g history-limit 65536

set-option -g automatic-rename on
set-option -g set-titles on
set-option -g set-titles-string "#T"

set-option -g clock-mode-style 24

set-option -g pane-border-status top

set-option -g mode-keys vi

# GUI copy/paste integration
set-option  -g mouse on
set-option -sg set-clipboard off
set-option  -g copy-command "xsel -i -b"

bind-key -T copy-mode    Enter             send-keys -X copy-pipe-no-clear
bind-key -T copy-mode    MouseDragEnd1Pane send-keys -X copy-pipe-no-clear
bind-key -T copy-mode-vi Enter             send-keys -X copy-pipe-no-clear
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-no-clear

# Theme
set-option -g clock-mode-colour default
set-option -g copy-mode-match-style bg=default,fg=yellow,reverse
set-option -g copy-mode-mark-style bg=default,fg=red,reverse
set-option -g copy-mode-current-match-style bg=default,fg=cyan,reverse
set-option -g menu-selected-style reverse
set-option -g message-command-style bg=default,fg=default,reverse
set-option -g message-style bg=default,fg=yellow,reverse
set-option -g mode-style bg=default,fg=yellow,reverse
set-option -g window-status-activity-style bold
set-option -g window-status-bell-style bold

set-option -g pane-active-border-style "#{?pane_in_mode,fg=yellow,#{?synchronize-panes,fg=red,fg=magenta}}"
set-option -g window-current-style bg=default,fg=magenta,bold
set-option -g status-style bg=default,fg=magenta,reverse
